@{
    ViewBag.Title = "Employees";
}

<div class="row-fluid">
    <ul class="breadcrumb">
        <li>@Html.ActionLink("Home", "Index", "Home")<span class="divider">/</span></li>
        <li class="active">Employees</li>
    </ul>
    <h2 class="heading">@ViewBag.Title</h2>
</div>

<div class="row-fluid">

    <div class="widget widget-padding span12">
        <div class="widget-header">
            <i class="icon-group"></i>
            <h5>@ViewBag.Title</h5>
            <div class="widget-buttons">
                <button class="btn" data-title="Add Employee" data-toggle="modal" data-target="#employeeDetails" data-bind="click: add"><i class="icon-plus"></i>&nbsp;Add Employee</button>

            </div>

        </div>
         @Html.Partial("_WidgetBodyLoading")
        <div class="widget-body ajax-content">
            <table id="employees" class="table table-striped table-bordered">

                <thead>
                    <tr>
                        <th>Name</th>
                        <th></th>
                    </tr>

                </thead>

                <tbody data-bind="foreach: employees">
                    <tr>
                        <td data-bind="text: DisplayName"></td>
                        <td>
                            <a class="btn" data-toggle="modal" data-target="#employeeDetails" data-bind="click: $root.edit"><i class="icon-pencil"></i>&nbsp;Edit</a>
                            <a class="btn" data-bind="click: $root.remove"><i class="icon-remove"></i>&nbsp;Delete</a>

                        </td>
                    </tr>
                </tbody>
            </table>

        </div>

    </div>
</div>


<div id="employeeDetails" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-bind="with: selectedEmployee">
    <form class="form-horizontal">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel" data-bind="text: PopupTitle"></h3>
        </div>
        <div class="modal-body">



            @*<div class="control-group">
                <label class="control-label">Legal Name</label>
                <div class="controls">
                    <input class="input-mini" type="text" data-bind="value: Prefix" placeholder="Title" />
                    <input class="input-medium" type="text" data-bind="value: FirstName" placeholder="First Name" />
                    <input class="input-mini" type="text" data-bind="value: MiddleInitial" placeholder="M" />
                    <input class="input-medium" type="text" data-bind="value: LastName" placeholder="Last Name" />
                </div>

            </div>*@

            <div class="control-group">
                <label class="control-label">Title</label>
                <div class="controls">
                    <input class="input-mini" type="text" data-bind="value: Prefix" />
                </div>
            </div>

            <div class="control-group" data-bind="css: {error: !FirstName.isValid()}">
                <label class="control-label">First Name</label>
                <div class="controls">
                    <input class="input-medium" type="text" data-bind="value: FirstName" />
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Middle</label>
                <div class="controls">
                    <input class="input-mini" type="text" data-bind="value: MiddleInitial" />
                </div>
            </div>

            <div class="control-group" data-bind="css: {error: !LastName.isValid()}">
                <label class="control-label">Last Name</label>
                <div class="controls">
                    <input class="input-medium" type="text" data-bind="value: LastName" />
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Print On Check As</label>
                <div class="controls">

                    <input type="text" data-bind="value: NameToPrintOnCheck" />
                </div>
            </div>

            

            @*<div class="control-group">
                <label class="control-label">Date of Birth</label>
                <div class="controls">

                    <div class="input-append date datepicker">
                        <input size="16" type="text" data-bind="datepicker: DateOfBirth, datepickerOptions: {startView: 2}">
                        <span class="add-on"><i class="icon-calendar"></i></span>
                    </div>
                </div>
            </div>*@

            

            <div class="control-group">
                <label class="control-label">Address</label>
                <div class="controls">

                    <input type="text" data-bind="value: Address1" placeholder="Address 1" />

                </div>

            </div>

            <div class="control-group">
                <div class="controls">
                    <input type="text" data-bind="value: Address2" placeholder="Address 2" />
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">City</label>
                <div class="controls">

                    <input type="text" data-bind="value: City" />
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">State</label>
                <div class="controls">
                    <select data-bind="options: $root.states, optionsText: 'name', optionsValue: 'abbreviation', optionsCaption: 'Select...', value: State" ></select>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Zip</label>
                <div class="controls">

                    <input type="text" data-bind="maskedInput: ZipCode, mask: '99999?-9999'" />
                </div>
            </div>

            <div class="control-group" data-bind="css: {error: !Ssn.isValid()}">
                <label class="control-label">SSN</label>
                <div class="controls">

                    <input type="text" data-bind="value: Ssn, maskedInput: Ssn, mask: '999-99-9999'" />
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Allowances</label>
                <div class="controls">
                    <input type="text" data-bind="value: Allowances" />
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Martial Status</label>
                <div class="controls">
                    <select data-bind="options: $root.martialStatus, optionsCaption: 'Select...', value: MaritalStatus" ></select>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Tax Form</label>
                <div class="controls">
                    <select data-bind="options: $root.taxForms, optionsCaption: 'Select...', value: TaxForm" ></select>
                </div>
            </div>

            

            @*<div class="control-group">
                <label class="control-label">Primary Phone</label>
                <div class="controls">

                    <input type="text" data-bind="value: PhoneNumber" />
                </div>
            </div>*@

            <div class="control-group" data-bind="visible: !IsNew">
                <label for="IsActive" class="control-label">Is Active</label>
                <div class="controls">
                    <input type="checkbox" name="IsActive" data-bind="selected: IsActive" />
                </div>
            </div>

            <div class="control-group" data-bind="css: {error: !PayRate.isValid()}">
                <label class="control-label">Pay Rate</label>
                <div class="controls">
                    <div class="input-prepend">
                        <span class="add-on">$</span>
                        <input type="text" data-bind="value: PayRate, numeralFormat: PayRate, format: '0,0.00'" />

                    </div>
                    <span class="help-inline" data-bind="validationMessage: PayRate"></span>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Notes</label>
                <div class="controls">
                    <textarea data-bind="value: Notes"></textarea>
                </div>
            </div>


        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-bind="click: $root.save">Save changes</button>
            <button type="button" class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
    </form>
</div>


@section scripts{
    <script>
        $(function () {
            ko.validation.init({
                errorMessageClass: "help-inline"
            });
            var employees = new Employees("#employeeDetails");
            ko.applyBindings(employees);

        });
    </script>
}